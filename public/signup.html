<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>LOFA 복지기금 회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f0f2f5; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: 'Malgun Gothic', sans-serif; }
        .signup-card { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 500px; }
    </style>
</head>
<body>

<div class="signup-card">
    <h3 class="text-center fw-bold text-primary mb-4">직원 회원가입</h3>
    <form id="signupForm">
        <div class="mb-3">
            <label class="form-label fw-bold">사번 (아이디)</label>
            <input type="text" name="employeeId" class="form-control" placeholder="사번을 입력하세요" required>
        </div>
        <div class="mb-3">
            <label class="form-label fw-bold">비밀번호</label>
            <input type="password" name="password" class="form-control" placeholder="비밀번호 설정" required>
        </div>
        <hr>
        <div class="row mb-3">
            <div class="col">
                <label class="form-label fw-bold">성명</label>
                <input type="text" name="userName" class="form-control" required>
            </div>
            <div class="col">
                <label class="form-label fw-bold">직급</label>
                <input type="text" name="position" class="form-control" placeholder="예: 차장" required>
            </div>
        </div>
        <div class="mb-3">
            <label class="form-label fw-bold">부서명</label>
            <input type="text" name="department" class="form-control" placeholder="예: 인프라팀" required>
        </div>
        <div class="mb-3">
            <label class="form-label fw-bold">입사일</label>
            <input type="date" name="joinDate" class="form-control" required>
        </div>
        
        <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary fw-bold">가입하기</button>
            <a href="/" class="btn btn-outline-secondary btn-sm">로그인으로 돌아가기</a>
        </div>
    </form>
</div>

<script>
    document.getElementById('signupForm').onsubmit = async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        
        try {
            const res = await fetch('/signup_process', { method: 'POST', body: formData });
            const result = await res.json();
            if (result.status === 'success') {
                alert('회원가입이 완료되었습니다! 로그인해 주세요.');
                location.href = '/';
            } else {
                alert('가입 실패: ' + result.message);
            }
        } catch (err) {
            alert('서버와 통신 중 오류가 발생했습니다.');
        }
    };
</script>
</body>
</html>